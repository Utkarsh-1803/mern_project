{"ast":null,"code":"import { API_URLS, getFormBody, LOCALSTORAGE_TOKEN_KEY } from \"../utils\";\nconst customFetch = async (url, _ref) => {\n  let {\n    body,\n    ...customConfig\n  } = _ref;\n  const token = window.localStorage.getItem(LOCALSTORAGE_TOKEN_KEY);\n  const headers = {\n    \"content-type\": \"application/x-www-form-urlencoded\"\n  };\n  if (token) {\n    headers.Authorization = `Bearer ${token}`;\n  }\n  const config = {\n    ...customConfig,\n    headers: {\n      ...headers,\n      ...customConfig.headers\n    }\n  };\n  if (body) {\n    config.body = getFormBody(body);\n  }\n  try {\n    const response = await fetch(url, config);\n    const data = await response.json();\n    if (data.success) {\n      return {\n        data: data.data,\n        success: true\n      };\n    }\n    throw new Error(data.message);\n  } catch (error) {\n    console.error(\"error\");\n    return {\n      message: error.message,\n      success: false\n    };\n  }\n};\nexport const login = (email, password) => {\n  return customFetch(API_URLS.login(), {\n    method: \"POST\",\n    body: {\n      email,\n      password\n    }\n  });\n};\nexport const register = async (email, password, confirmPassword) => {\n  return customFetch(API_URLS.signup(), {\n    method: \"POST\",\n    body: {\n      name,\n      email,\n      password,\n      confirm_password: confirmPassword\n    }\n  });\n};","map":{"version":3,"names":["API_URLS","getFormBody","LOCALSTORAGE_TOKEN_KEY","customFetch","url","body","customConfig","token","window","localStorage","getItem","headers","Authorization","config","response","fetch","data","json","success","Error","message","error","console","login","email","password","method","register","confirmPassword","signup","name","confirm_password"],"sources":["/Users/little/Documents/Full Stack/Practice/dignitech-assignment/src/api/index.js"],"sourcesContent":["import { API_URLS, getFormBody, LOCALSTORAGE_TOKEN_KEY } from \"../utils\";\n\nconst customFetch = async (url, { body, ...customConfig }) => {\n  const token = window.localStorage.getItem(LOCALSTORAGE_TOKEN_KEY);\n\n  const headers = {\n    \"content-type\": \"application/x-www-form-urlencoded\",\n  };\n\n  if (token) {\n    headers.Authorization = `Bearer ${token}`;\n  }\n\n  const config = {\n    ...customConfig,\n    headers: {\n      ...headers,\n      ...customConfig.headers,\n    },\n  };\n\n  if (body) {\n    config.body = getFormBody(body);\n  }\n\n  try {\n    const response = await fetch(url, config);\n    const data = await response.json();\n\n    if (data.success) {\n      return {\n        data: data.data,\n        success: true,\n      };\n    }\n\n    throw new Error(data.message);\n  } catch (error) {\n    console.error(\"error\");\n    return {\n      message: error.message,\n      success: false,\n    };\n  }\n};\n\nexport const login = (email, password) => {\n  return customFetch(API_URLS.login(), {\n    method: \"POST\",\n    body: { email, password },\n  });\n};\n\nexport const register = async (email, password, confirmPassword) => {\n  return customFetch(API_URLS.signup(), {\n    method: \"POST\",\n    body: { name, email, password, confirm_password: confirmPassword },\n  });\n};\n"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,WAAW,EAAEC,sBAAsB,QAAQ,UAAU;AAExE,MAAMC,WAAW,GAAG,OAAOC,GAAG,WAAgC;EAAA,IAA9B;IAAEC,IAAI;IAAE,GAAGC;EAAa,CAAC;EACvD,MAAMC,KAAK,GAAGC,MAAM,CAACC,YAAY,CAACC,OAAO,CAACR,sBAAsB,CAAC;EAEjE,MAAMS,OAAO,GAAG;IACd,cAAc,EAAE;EAClB,CAAC;EAED,IAAIJ,KAAK,EAAE;IACTI,OAAO,CAACC,aAAa,GAAI,UAASL,KAAM,EAAC;EAC3C;EAEA,MAAMM,MAAM,GAAG;IACb,GAAGP,YAAY;IACfK,OAAO,EAAE;MACP,GAAGA,OAAO;MACV,GAAGL,YAAY,CAACK;IAClB;EACF,CAAC;EAED,IAAIN,IAAI,EAAE;IACRQ,MAAM,CAACR,IAAI,GAAGJ,WAAW,CAACI,IAAI,CAAC;EACjC;EAEA,IAAI;IACF,MAAMS,QAAQ,GAAG,MAAMC,KAAK,CAACX,GAAG,EAAES,MAAM,CAAC;IACzC,MAAMG,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,EAAE;IAElC,IAAID,IAAI,CAACE,OAAO,EAAE;MAChB,OAAO;QACLF,IAAI,EAAEA,IAAI,CAACA,IAAI;QACfE,OAAO,EAAE;MACX,CAAC;IACH;IAEA,MAAM,IAAIC,KAAK,CAACH,IAAI,CAACI,OAAO,CAAC;EAC/B,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,OAAO,CAAC;IACtB,OAAO;MACLD,OAAO,EAAEC,KAAK,CAACD,OAAO;MACtBF,OAAO,EAAE;IACX,CAAC;EACH;AACF,CAAC;AAED,OAAO,MAAMK,KAAK,GAAG,CAACC,KAAK,EAAEC,QAAQ,KAAK;EACxC,OAAOtB,WAAW,CAACH,QAAQ,CAACuB,KAAK,EAAE,EAAE;IACnCG,MAAM,EAAE,MAAM;IACdrB,IAAI,EAAE;MAAEmB,KAAK;MAAEC;IAAS;EAC1B,CAAC,CAAC;AACJ,CAAC;AAED,OAAO,MAAME,QAAQ,GAAG,OAAOH,KAAK,EAAEC,QAAQ,EAAEG,eAAe,KAAK;EAClE,OAAOzB,WAAW,CAACH,QAAQ,CAAC6B,MAAM,EAAE,EAAE;IACpCH,MAAM,EAAE,MAAM;IACdrB,IAAI,EAAE;MAAEyB,IAAI;MAAEN,KAAK;MAAEC,QAAQ;MAAEM,gBAAgB,EAAEH;IAAgB;EACnE,CAAC,CAAC;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}