{"ast":null,"code":"import _regeneratorRuntime from\"/Users/little/Documents/Full Stack/Practice/dignitech-assignment-own-server/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/little/Documents/Full Stack/Practice/dignitech-assignment-own-server/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/little/Documents/Full Stack/Practice/dignitech-assignment-own-server/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import ReactPaginate from\"react-paginate\";import\"../styles/App.css\";import{useToasts}from\"react-toast-notifications\";import Popup from\"reactjs-popup\";import\"reactjs-popup/dist/index.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Home=function Home(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newEmail=_useState6[0],setNewEmail=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),newPhone=_useState8[0],setNewPhone=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),newStatus=_useState10[0],setNewStatus=_useState10[1];var _useToasts=useToasts(),addToast=_useToasts.addToast;useEffect(function(){var getUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:8000/dummyusers/all_users?page=\".concat(1,\"&limit=\",4));case 2:res=_context.sent;_context.next=5;return res.json();case 5:json=_context.sent;setUsers(json.data);case 7:case\"end\":return _context.stop();}}},_callee);}));return function getUsers(){return _ref.apply(this,arguments);};}();getUsers();},[]);var fetchUsers=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(currentPage){var res,json;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"http://localhost:8000/dummyusers/all_users?page=\".concat(currentPage,\"&limit=\",4));case 2:res=_context2.sent;_context2.next=5;return res.json();case 5:json=_context2.sent;return _context2.abrupt(\"return\",json.data);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchUsers(_x){return _ref2.apply(this,arguments);};}();var handlePageClick=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(data){var currentPage,usersFormServer;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:currentPage=data.selected+1;_context3.next=3;return fetchUsers(currentPage);case 3:usersFormServer=_context3.sent;setUsers(usersFormServer);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function handlePageClick(_x2){return _ref3.apply(this,arguments);};}();var handleUpdate=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(user){var response,res;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch(\"http://localhost:8000/dummyusers/update?id=\".concat(user._id),{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({name:newName!==\"\"?newName:user.name,email:newEmail!==\"\"?newEmail:user.email,phone:newPhone!==\"\"?newPhone:user.phone,status:newStatus!==\"\"?newStatus:user.status})});case 2:response=_context4.sent;_context4.next=5;return response.json();case 5:res=_context4.sent;console.log(res);if(res.success){addToast(\"User updated successfully\",{appearance:\"success\",autoDismiss:true});}else{addToast(res.message,{appearance:\"error\",autoDismiss:true});}setTimeout(function(){window.location.reload();},1000);case 9:case\"end\":return _context4.stop();}}},_callee4);}));return function handleUpdate(_x3){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"users-block\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h1\",{children:\"Hello Users!\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"flex\",children:users.length&&users.map(function(user){return/*#__PURE__*/_jsxs(\"div\",{className:\"boxdesign\",children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"strong\",{children:user.name})}),/*#__PURE__*/_jsx(\"p\",{children:user.email}),/*#__PURE__*/_jsx(\"p\",{children:user.phone}),/*#__PURE__*/_jsx(\"p\",{children:user.status}),/*#__PURE__*/_jsxs(Popup,{trigger:/*#__PURE__*/_jsx(\"button\",{children:\" Update \"}),position:\"right center\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Update Details\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:user.name,onChange:function onChange(e){setNewName(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:user.email,onChange:function onChange(e){setNewEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",defaultValue:user.phone,onChange:function onChange(e){setNewPhone(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:user.status,onChange:function onChange(e){setNewStatus(e.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){handleUpdate(user);},children:\"Save\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){var response,res;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return fetch(\"http://localhost:8000/dummyusers/delete?id=\".concat(user._id));case 2:response=_context5.sent;_context5.next=5;return response.json();case 5:res=_context5.sent;if(res.success){addToast(\"User deleted successfully\",{appearance:\"success\",autoDismiss:true});}else{addToast(res.message,{appearance:\"error\",autoDismiss:true});}setTimeout(function(){window.location.reload();},1000);case 8:case\"end\":return _context5.stop();}}},_callee5);})),children:\"Delete\"})]},user._id);})})]}),/*#__PURE__*/_jsx(ReactPaginate,{previousLabel:\"<<\",nextLabel:\">>\",pageCount:6,onPageChange:handlePageClick,containerClassName:\"pagination justify-content-center\",pageClassName:\"page-item\",pageLinkClassName:\"page-link\",previousClassName:\"page-item\",previousLinkClassName:\"page-link\",nextClassName:\"page-item\",nextLinkClassName:\"page-link\",activeClassName:\"active\"})]});};export default Home;","map":{"version":3,"names":["useState","useEffect","ReactPaginate","useToasts","Popup","Home","users","setUsers","newName","setNewName","newEmail","setNewEmail","newPhone","setNewPhone","newStatus","setNewStatus","addToast","getUsers","fetch","res","json","data","fetchUsers","currentPage","handlePageClick","selected","usersFormServer","handleUpdate","user","_id","method","headers","body","JSON","stringify","name","email","phone","status","response","console","log","success","appearance","autoDismiss","message","setTimeout","window","location","reload","length","map","e","target","value"],"sources":["/Users/little/Documents/Full Stack/Practice/dignitech-assignment-own-server/src/pages/Home.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport ReactPaginate from \"react-paginate\";\nimport \"../styles/App.css\";\nimport { useToasts } from \"react-toast-notifications\";\nimport Popup from \"reactjs-popup\";\nimport \"reactjs-popup/dist/index.css\";\n\nconst Home = () => {\n  const [users, setUsers] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newEmail, setNewEmail] = useState(\"\");\n  const [newPhone, setNewPhone] = useState(\"\");\n  const [newStatus, setNewStatus] = useState(\"\");\n  const { addToast } = useToasts();\n\n  useEffect(() => {\n    const getUsers = async () => {\n      const res = await fetch(\n        `http://localhost:8000/dummyusers/all_users?page=${1}&limit=${4}`\n      );\n      const json = await res.json();\n      setUsers(json.data);\n    };\n    getUsers();\n  }, []);\n\n  const fetchUsers = async (currentPage) => {\n    const res = await fetch(\n      `http://localhost:8000/dummyusers/all_users?page=${currentPage}&limit=${4}`\n    );\n    const json = await res.json();\n    return json.data;\n  };\n\n  const handlePageClick = async (data) => {\n    let currentPage = data.selected + 1;\n    const usersFormServer = await fetchUsers(currentPage);\n    setUsers(usersFormServer);\n  };\n\n  const handleUpdate = async (user) => {\n    const response = await fetch(\n      `http://localhost:8000/dummyusers/update?id=${user._id}`,\n      {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          name: newName !== \"\" ? newName : user.name,\n          email: newEmail !== \"\" ? newEmail : user.email,\n          phone: newPhone !== \"\" ? newPhone : user.phone,\n          status: newStatus !== \"\" ? newStatus : user.status,\n        }),\n      }\n    );\n\n    const res = await response.json();\n    console.log(res);\n\n    if (res.success) {\n      addToast(\"User updated successfully\", {\n        appearance: \"success\",\n        autoDismiss: true,\n      });\n    } else {\n      addToast(res.message, {\n        appearance: \"error\",\n        autoDismiss: true,\n      });\n    }\n    setTimeout(() => {\n      window.location.reload();\n    }, 1000);\n  };\n\n  return (\n    <>\n      <div className=\"users-block\">\n        <br />\n        <h1>Hello Users!</h1>\n        <br />\n        <div className=\"flex\">\n          {users.length &&\n            users.map((user) => {\n              return (\n                <div key={user._id} className=\"boxdesign\">\n                  <p>\n                    <strong>{user.name}</strong>\n                  </p>\n                  <p>{user.email}</p>\n                  <p>{user.phone}</p>\n                  <p>{user.status}</p>\n\n                  <Popup\n                    trigger={<button> Update </button>}\n                    position=\"right center\"\n                  >\n                    <div>Update Details</div>\n                    <br />\n                    <input\n                      type=\"text\"\n                      defaultValue={user.name}\n                      onChange={(e) => {\n                        setNewName(e.target.value);\n                      }}\n                    />\n                    <input\n                      type=\"text\"\n                      defaultValue={user.email}\n                      onChange={(e) => {\n                        setNewEmail(e.target.value);\n                      }}\n                    />\n                    <input\n                      type=\"number\"\n                      defaultValue={user.phone}\n                      onChange={(e) => {\n                        setNewPhone(e.target.value);\n                      }}\n                    />\n                    <input\n                      type=\"text\"\n                      defaultValue={user.status}\n                      onChange={(e) => {\n                        setNewStatus(e.target.value);\n                      }}\n                    />\n                    <br />\n                    <br />\n                    <button\n                      onClick={() => {\n                        handleUpdate(user);\n                      }}\n                    >\n                      Save\n                    </button>\n                  </Popup>\n\n                  <button\n                    onClick={async () => {\n                      const response = await fetch(\n                        `http://localhost:8000/dummyusers/delete?id=${user._id}`\n                      );\n                      const res = await response.json();\n                      if (res.success) {\n                        addToast(\"User deleted successfully\", {\n                          appearance: \"success\",\n                          autoDismiss: true,\n                        });\n                      } else {\n                        addToast(res.message, {\n                          appearance: \"error\",\n                          autoDismiss: true,\n                        });\n                      }\n                      setTimeout(() => {\n                        window.location.reload();\n                      }, 1000);\n                    }}\n                  >\n                    Delete\n                  </button>\n                </div>\n              );\n            })}\n        </div>\n      </div>\n\n      <ReactPaginate\n        previousLabel={\"<<\"}\n        nextLabel={\">>\"}\n        pageCount={6}\n        onPageChange={handlePageClick}\n        containerClassName={\"pagination justify-content-center\"}\n        pageClassName={\"page-item\"}\n        pageLinkClassName={\"page-link\"}\n        previousClassName={\"page-item\"}\n        previousLinkClassName={\"page-link\"}\n        nextClassName={\"page-item\"}\n        nextLinkClassName={\"page-link\"}\n        activeClassName={\"active\"}\n      />\n    </>\n  );\n};\n\nexport default Home;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}