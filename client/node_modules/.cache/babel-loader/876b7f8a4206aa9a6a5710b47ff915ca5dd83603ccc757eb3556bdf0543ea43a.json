{"ast":null,"code":"import { API_URLS, getFormBody, LOCALSTORAGE_TOKEN_KEY } from \"../utils\";\nconst customFetch = async (url, _ref) => {\n  let {\n    body\n  } = _ref;\n  const token = window.localStorage.getItem(LOCALSTORAGE_TOKEN_KEY);\n  const headers = {\n    \"content-type\": \"application/x-www-form-urlencoded\"\n  };\n  if (token) {\n    headers.Authorization = `Bearer ${token}`;\n  }\n  const config = {\n    headers: {\n      ...headers\n    }\n  };\n  if (body) {\n    config.body = getFormBody(body);\n  }\n  try {\n    const response = await fetch(url, config);\n    const data = await response.json();\n    console.log(data);\n    if (data.success) {\n      return {\n        data: data.data,\n        success: true\n      };\n    }\n    throw new Error(data.message);\n  } catch (error) {\n    console.log(\"hi\");\n    console.error(\"error\");\n    return {\n      message: error.message,\n      success: false\n    };\n  }\n};\nexport const login = (email, password) => {\n  return customFetch(API_URLS.login(), {\n    method: \"POST\",\n    body: {\n      email,\n      password\n    }\n  });\n};\nexport const register = async (email, password) => {\n  console.log(email, password);\n  return customFetch(API_URLS.signup(), {\n    method: \"POST\",\n    body: {\n      email,\n      password\n    }\n  });\n};","map":{"version":3,"names":["API_URLS","getFormBody","LOCALSTORAGE_TOKEN_KEY","customFetch","url","body","token","window","localStorage","getItem","headers","Authorization","config","response","fetch","data","json","console","log","success","Error","message","error","login","email","password","method","register","signup"],"sources":["/Users/little/Documents/Full Stack/Practice/dignitech-assignment/src/api/index.js"],"sourcesContent":["import { API_URLS, getFormBody, LOCALSTORAGE_TOKEN_KEY } from \"../utils\";\n\nconst customFetch = async (url, { body }) => {\n  const token = window.localStorage.getItem(LOCALSTORAGE_TOKEN_KEY);\n\n  const headers = {\n    \"content-type\": \"application/x-www-form-urlencoded\",\n  };\n\n  if (token) {\n    headers.Authorization = `Bearer ${token}`;\n  }\n\n  const config = {\n    headers: {\n      ...headers,\n    },\n  };\n\n  if (body) {\n    config.body = getFormBody(body);\n  }\n\n  try {\n    const response = await fetch(url, config);\n    const data = await response.json();\n    console.log(data);\n\n    if (data.success) {\n      return {\n        data: data.data,\n        success: true,\n      };\n    }\n\n    throw new Error(data.message);\n  } catch (error) {\n    console.log(\"hi\");\n    console.error(\"error\");\n    return {\n      message: error.message,\n      success: false,\n    };\n  }\n};\n\nexport const login = (email, password) => {\n  return customFetch(API_URLS.login(), {\n    method: \"POST\",\n    body: { email, password },\n  });\n};\n\nexport const register = async (email, password) => {\n  console.log(email, password);\n  return customFetch(API_URLS.signup(), {\n    method: \"POST\",\n    body: { email, password },\n  });\n};\n"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,WAAW,EAAEC,sBAAsB,QAAQ,UAAU;AAExE,MAAMC,WAAW,GAAG,OAAOC,GAAG,WAAe;EAAA,IAAb;IAAEC;EAAK,CAAC;EACtC,MAAMC,KAAK,GAAGC,MAAM,CAACC,YAAY,CAACC,OAAO,CAACP,sBAAsB,CAAC;EAEjE,MAAMQ,OAAO,GAAG;IACd,cAAc,EAAE;EAClB,CAAC;EAED,IAAIJ,KAAK,EAAE;IACTI,OAAO,CAACC,aAAa,GAAI,UAASL,KAAM,EAAC;EAC3C;EAEA,MAAMM,MAAM,GAAG;IACbF,OAAO,EAAE;MACP,GAAGA;IACL;EACF,CAAC;EAED,IAAIL,IAAI,EAAE;IACRO,MAAM,CAACP,IAAI,GAAGJ,WAAW,CAACI,IAAI,CAAC;EACjC;EAEA,IAAI;IACF,MAAMQ,QAAQ,GAAG,MAAMC,KAAK,CAACV,GAAG,EAAEQ,MAAM,CAAC;IACzC,MAAMG,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,EAAE;IAClCC,OAAO,CAACC,GAAG,CAACH,IAAI,CAAC;IAEjB,IAAIA,IAAI,CAACI,OAAO,EAAE;MAChB,OAAO;QACLJ,IAAI,EAAEA,IAAI,CAACA,IAAI;QACfI,OAAO,EAAE;MACX,CAAC;IACH;IAEA,MAAM,IAAIC,KAAK,CAACL,IAAI,CAACM,OAAO,CAAC;EAC/B,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdL,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC;IACjBD,OAAO,CAACK,KAAK,CAAC,OAAO,CAAC;IACtB,OAAO;MACLD,OAAO,EAAEC,KAAK,CAACD,OAAO;MACtBF,OAAO,EAAE;IACX,CAAC;EACH;AACF,CAAC;AAED,OAAO,MAAMI,KAAK,GAAG,CAACC,KAAK,EAAEC,QAAQ,KAAK;EACxC,OAAOtB,WAAW,CAACH,QAAQ,CAACuB,KAAK,EAAE,EAAE;IACnCG,MAAM,EAAE,MAAM;IACdrB,IAAI,EAAE;MAAEmB,KAAK;MAAEC;IAAS;EAC1B,CAAC,CAAC;AACJ,CAAC;AAED,OAAO,MAAME,QAAQ,GAAG,OAAOH,KAAK,EAAEC,QAAQ,KAAK;EACjDR,OAAO,CAACC,GAAG,CAACM,KAAK,EAAEC,QAAQ,CAAC;EAC5B,OAAOtB,WAAW,CAACH,QAAQ,CAAC4B,MAAM,EAAE,EAAE;IACpCF,MAAM,EAAE,MAAM;IACdrB,IAAI,EAAE;MAAEmB,KAAK;MAAEC;IAAS;EAC1B,CAAC,CAAC;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}